<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>하이라이트 업로드</title>

<!-- Bootstrap + jQuery -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- 공통 CSS -->
<link rel="stylesheet" th:href="@{/css/common/header.css}" />
<link rel="stylesheet" th:href="@{/css/common/footer.css}" />
<link rel="stylesheet" th:href="@{/css/friend/friendList.css}" />
<link rel="stylesheet" th:href="@{/css/board/videoUploadForm.css}" />

<!-- Custom Font -->
<link
	href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap"
	rel="stylesheet" />

<!-- Quill CSS -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
	rel="stylesheet" />

<!-- Quill JS -->
<script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

</head>
<body>
	<div th:replace="~{common/header :: header}"></div>

	<div class="upload-wrapper">
		<div class="card">
			<div class="card-header">
				<div class="d-flex justify-content-between align-items-center mb-4">
					<h4 class="title">🎬 하이라이트 영상 업로드</h4>
					<a th:href="@{/board/video}" class="btn-back">← 돌아가기</a>
				</div>
			</div>

			<div class="card-body">
				<form th:action="@{/board/video/upload}" method="post"
					enctype="multipart/form-data">
					<input type="hidden" name="typeName" value="영상"> <input
						type="hidden" name="typeClass" value="5">
					<div class="form-group">
						<label for="title">제목</label> <input type="text"
							class="form-control" id="title" name="title" required
							placeholder="영상 제목을 입력하세요" />
					</div>

					<div class="form-group">
						<label for="writer">작성자</label> <input type="text"
							class="form-control" id="writer" readonly
							th:value="${loginUser.nickName}" /> <input type="hidden"
							name="userName" th:value="${loginUser.userName}" />
					</div>

					<div class="form-group">
						<label for="description">설명</label>
						<!-- Quill 에디터가 들어갈 div -->
						<div id="editor"
							style="height: 150px; background-color: #fff; color: #000;"></div>
						<!-- 실제 폼 제출용 히든 input -->
						<input type="hidden" name="detail" id="quillContent" />
					</div>

					<div class="form-group">
						<label for="videoFile">MP4 영상 파일</label> <input type="file"
							class="form-control-file" id="videoFile" name="videoFile"
							accept="video/mp4" required /> <small class="form-text">※
							500MB 이하의 .mp4 파일만 업로드 가능합니다.</small>
					</div>


					<div class="text-center mt-4">
						<button type="submit" class="btn btn-upload">업로드하기</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<div th:replace="~{common/footer :: footer}"></div>
	<script th:src="@{/js/board/quillForUpload.js}"></script>
	<script>
		// 폼 제출 전에 히든 input에 Quill 내용 HTML로 저장
		$('form').on('submit', function() {
			$('#quillContent').val(quill.root.innerHTML);
		});
	</script>
</body>
</html>
