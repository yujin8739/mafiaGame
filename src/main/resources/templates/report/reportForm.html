<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ìš©ì ì‹ ê³  - GodFather 0805</title>
    <link rel="stylesheet" th:href="@{/css/common/header.css}" />
    <link rel="stylesheet" th:href="@{/css/common/footer.css}" />
    <link rel="stylesheet" th:href="@{/css/member/mypage.css}" />
    <link rel="icon" href="/favicon.ico">
</head>
<body>

    <!-- ë©”ì‹œì§€ í‘œì‹œ -->
    <div th:if="${msg}">
        <script th:inline="javascript">
            alert(/*[[${msg}]]*/ 'ë©”ì‹œì§€');
        </script>
    </div>

    <!-- í—¤ë” -->
    <div th:replace="~{common/header :: header}"></div>

    <!-- ì‹ ê³  í¼ ì»¨í…Œì´ë„ˆ -->
    <div class="mypage-container">
        <h1 class="mypage-title">ğŸš¨ ì‚¬ìš©ì ì‹ ê³ </h1>

        <!-- ê²½ê³  ë©”ì‹œì§€ -->
        <div class="warning-section">
            <div class="warning-icon">âš ï¸</div>
            <h3>ì‹ ê³  ì‹œ ì£¼ì˜ì‚¬í•­</h3>
            <ul class="warning-list">
                <li>í—ˆìœ„ ì‹ ê³  ì‹œ ë³¸ì¸ì´ ì œì¬ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li>ì‹ ê³ ëŠ” ì‹ ì¤‘í•˜ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”.</li>
                <li>ìš•ì„¤ì´ë‚˜ ê°ì •ì ì¸ í‘œí˜„ì€ í”¼í•´ì£¼ì„¸ìš”.</li>
                <li>êµ¬ì²´ì ì´ê³  ê°ê´€ì ì¸ ì‚¬ì‹¤ì„ ê¸°ì¬í•´ì£¼ì„¸ìš”.</li>
            </ul>
        </div>

        <!-- ì‹ ê³  í¼ ì„¹ì…˜ -->
        <div class="report-form-section">
            <h3>ì‹ ê³  ì •ë³´ ì…ë ¥</h3>
            <form id="reportSubmitForm" th:action="@{/report/submit}" method="POST">
                
                <div class="form-group">
                    <label for="reportedName">ì‹ ê³  ëŒ€ìƒ ì‚¬ìš©ì *</label>
                    <input type="text" id="reportedName" name="reportedName" 
                           th:value="${param.reportedName}" 
                           placeholder="ì‹ ê³ í•  ì‚¬ìš©ìëª…ì„ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”" required>
                    <small class="help-text">ì‚¬ìš©ìëª…ì€ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”. (ëŒ€ì†Œë¬¸ì êµ¬ë¶„)</small>
                </div>

                <div class="form-group">
                    <label for="reportCategory">ì‹ ê³  ì‚¬ìœ  *</label>
                    <select id="reportCategory" name="reportCategory" required>
                        <option value="">-- ì‹ ê³  ì‚¬ìœ ë¥¼ ì„ íƒí•˜ì„¸ìš” --</option>
                        <option value="ìš•ì„¤/ë¹„ë°©">ìš•ì„¤/ë¹„ë°©</option>
                        <option value="ìŠ¤íŒ¸/ê´‘ê³ ">ìŠ¤íŒ¸/ê´‘ê³ </option>
                        <option value="ë¶€ì ì ˆí•œ ë‚´ìš©">ë¶€ì ì ˆí•œ ë‚´ìš©</option>
                        <option value="ì‚¬ê¸°/ì‚¬ì¹­">ì‚¬ê¸°/ì‚¬ì¹­</option>
                        <option value="ê²Œì„ ë°©í•´">ê²Œì„ ë°©í•´</option>
                        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="reportDetail">ìƒì„¸ ì‹ ê³  ë‚´ìš© *</label>
                    <textarea id="reportDetail" name="reportDetail" rows="6" 
                              placeholder="ì‹ ê³  ì‚¬ìœ ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.&#10;&#10;ì˜ˆì‹œ:&#10;- ì–¸ì œ ì–´ë–¤ ìƒí™©ì—ì„œ ë°œìƒí–ˆëŠ”ì§€&#10;- ì–´ë–¤ ë‚´ìš©/í–‰ë™ì´ ë¬¸ì œì˜€ëŠ”ì§€&#10;- ê´€ë ¨ ì¦ê±°ë‚˜ ìƒí™© ì„¤ëª…" required></textarea>
                    <small class="help-text">ìµœì†Œ 10ì ì´ìƒ ì‘ì„±í•´ì£¼ì„¸ìš”.</small>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="confirmReport" name="confirmReport" required>
                    <label for="confirmReport">
                        ìœ„ ë‚´ìš©ì´ ì‚¬ì‹¤ì„ì„ í™•ì¸í•˜ë©°, í—ˆìœ„ ì‹ ê³  ì‹œ ì œì¬ë°›ì„ ìˆ˜ ìˆìŒì„ ë™ì˜í•©ë‹ˆë‹¤.
                    </label>
                </div>

                <div class="form-buttons">
                    <button type="button" onclick="history.back()" class="cancel-btn">ì·¨ì†Œ</button>
                    <button type="submit" class="submit-btn">ì‹ ê³ í•˜ê¸°</button>
                </div>
            </form>
        </div>

        <!-- ì¶”ê°€ ì •ë³´ ì„¹ì…˜ -->
        <div class="info-section">
            <h3>ì‹ ê³  ì²˜ë¦¬ ì•ˆë‚´</h3>
            <div class="info-content">
                <p><strong>ì²˜ë¦¬ ì‹œê°„:</strong> ì‹ ê³  ì ‘ìˆ˜ í›„ 1-3ì¼ ë‚´ ê²€í† </p>
                <p><strong>ì²˜ë¦¬ ê²°ê³¼:</strong> ë§ˆì´í˜ì´ì§€ > ì‹ ê³ ë‚´ì—­ì—ì„œ í™•ì¸ ê°€ëŠ¥</p>
                <p><strong>ë¬¸ì˜ì‚¬í•­:</strong> ê³ ê°ì„¼í„°ë¥¼ í†µí•´ ë¬¸ì˜ ë°”ëë‹ˆë‹¤</p>
            </div>
        </div>
    </div>

    <!-- í‘¸í„° -->
    <div th:replace="~{common/footer :: footer}"></div>

    <!-- ì¶”ê°€ ìŠ¤íƒ€ì¼ -->
    <style>
        /* ê²½ê³  ì„¹ì…˜ ìŠ¤íƒ€ì¼ (deleteAccount.css ì°¸ê³ ) */
        .warning-section {
            background-color: #2a1a1a;
            border: 2px solid #ff3b3b;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }

        .warning-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .warning-section h3 {
            color: #ff3b3b;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .warning-list {
            text-align: left;
            color: #f5f5f5;
            margin: 0;
            padding-left: 20px;
        }

        .warning-list li {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        /* ì‹ ê³  í¼ ì„¹ì…˜ */
        .report-form-section {
            background-color: #222;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid #444;
        }

        .report-form-section h3 {
            color: #ff3b3b;
            margin-bottom: 20px;
            font-size: 18px;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }

        /* í¼ ê·¸ë£¹ (mypage.cssì™€ ë™ì¼) */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 14px;
            color: #ccc;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            box-sizing: border-box;
            border-radius: 6px;
            border: 1px solid #444;
            background-color: #111;
            color: #eee;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #ff3b3b;
            box-shadow: 0 0 5px rgba(255, 59, 59, 0.3);
        }

        .help-text {
            display: block;
            margin-top: 5px;
            font-size: 12px;
            color: #888;
        }

        /* ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ (deleteAccount.cssì™€ ë™ì¼) */
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding: 15px;
            background-color: #1a1a1a;
            border-radius: 6px;
            border: 1px solid #444;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
            accent-color: #ff3b3b;
        }

        .checkbox-group label {
            color: #f5f5f5;
            font-weight: 500;
            cursor: pointer;
            margin: 0;
        }

        /* ë²„íŠ¼ ê·¸ë£¹ */
        .form-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .cancel-btn, .submit-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .cancel-btn {
            background-color: #666;
            color: white;
        }

        .cancel-btn:hover {
            background-color: #777;
        }

        .submit-btn {
            background-color: #ff3b3b;
            color: white;
        }

        .submit-btn:hover {
            background-color: #cc2e2e;
            box-shadow: 0 0 10px rgba(255, 59, 59, 0.5);
        }

        /* ì •ë³´ ì„¹ì…˜ */
        .info-section {
            background-color: #222;
            border-radius: 8px;
            padding: 25px;
            border: 1px solid #444;
        }

        .info-section h3 {
            color: #ff3b3b;
            margin-bottom: 20px;
            font-size: 18px;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }

        .info-content p {
            margin-bottom: 10px;
            color: #f5f5f5;
            line-height: 1.6;
        }

        .info-content strong {
            color: #ff3b3b;
        }
    </style>

    <!-- Thymeleaf ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script th:inline="javascript">
        $(document).ready(function() {
            // í¼ ì œì¶œ ì²˜ë¦¬
            $('#reportSubmitForm').submit(function(e) {
                e.preventDefault();
                
                // ìœ íš¨ì„± ê²€ì‚¬
                const reportDetail = $('#reportDetail').val().trim();
                if (reportDetail.length < 10) {
                    alert('ì‹ ê³  ë‚´ìš©ì„ ìµœì†Œ 10ì ì´ìƒ ì‘ì„±í•´ì£¼ì„¸ìš”.');
                    $('#reportDetail').focus();
                    return false;
                }

                // ì‹ ê³  ë°ì´í„° ì¤€ë¹„
                const category = $('#reportCategory').val();
                const detail = $('#reportDetail').val();
                const reason = category + ': ' + detail;

                // AJAX ìš”ì²­
                $.ajax({
                    url: /*[[@{/report/submit}]]*/ '/report/submit',
                    type: 'POST',
                    data: {
                        reportedName: $('#reportedName').val(),
                        reason: reason
                    },
                    success: function(response) {
                        if (response.success) {
                            alert(response.message);
                            window.location.href = /*[[@{/report/myReports}]]*/ '/report/myReports';
                        } else {
                            alert(response.message);
                        }
                    },
                    error: function() {
                        alert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                    }
                });
            });

            // ì‹¤ì‹œê°„ ê¸€ì ìˆ˜ ì²´í¬
            $('#reportDetail').on('input', function() {
                const length = $(this).val().trim().length;
                const helpText = $(this).siblings('.help-text');
                
                if (length < 10) {
                    helpText.text(`ìµœì†Œ 10ì ì´ìƒ ì‘ì„±í•´ì£¼ì„¸ìš”. (í˜„ì¬: ${length}ì)`);
                    helpText.css('color', '#ff3b3b');
                } else {
                    helpText.text(`í˜„ì¬: ${length}ì`);
                    helpText.css('color', '#888');
                }
            });

            console.log('ì‹ ê³  í¼ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
        });
    </script>

</body>
</html>